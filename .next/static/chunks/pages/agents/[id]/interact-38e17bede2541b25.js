(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[141],{83322:(e,c,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/agents/[id]/interact",function(){return a(31193)}])},97405:(e,c,a)=>{"use strict";a.d(c,{A:()=>d});let d=(0,a(46471).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},81277:(e,c,a)=>{"use strict";a.d(c,{Fc:()=>i,TN:()=>o,XL:()=>l});var d=a(74848),t=a(96540),r=a(22732),s=a(76985);let n=(0,r.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),i=t.forwardRef((e,c)=>{let{className:a,variant:t,...r}=e;return(0,d.jsx)("div",{ref:c,role:"alert",className:(0,s.cn)(n({variant:t}),a),...r})});i.displayName="Alert";let l=t.forwardRef((e,c)=>{let{className:a,...t}=e;return(0,d.jsx)("h5",{ref:c,className:(0,s.cn)("mb-1 font-medium leading-none tracking-tight",a),...t})});l.displayName="AlertTitle";let o=t.forwardRef((e,c)=>{let{className:a,...t}=e;return(0,d.jsx)("div",{ref:c,className:(0,s.cn)("text-sm [&_p]:leading-relaxed",a),...t})});o.displayName="AlertDescription"},11741:(e,c,a)=>{"use strict";a.d(c,{Zp:()=>s});var d=a(74848),t=a(96540),r=a(76985);let s=t.forwardRef((e,c)=>{let{className:a,...t}=e;return(0,d.jsx)("div",{ref:c,className:(0,r.cn)("shadow border border-border rounded-2xl",a),...t})});s.displayName="Card",t.forwardRef((e,c)=>{let{className:a,...t}=e;return(0,d.jsx)("div",{ref:c,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a),...t})}).displayName="CardHeader",t.forwardRef((e,c)=>{let{className:a,...t}=e;return(0,d.jsx)("h3",{ref:c,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",a),...t})}).displayName="CardTitle",t.forwardRef((e,c)=>{let{className:a,...t}=e;return(0,d.jsx)("p",{ref:c,className:(0,r.cn)("text-sm text-muted-foreground",a),...t})}).displayName="CardDescription",t.forwardRef((e,c)=>{let{className:a,...t}=e;return(0,d.jsx)("div",{ref:c,className:(0,r.cn)("p-6 pt-0",a),...t})}).displayName="CardContent",t.forwardRef((e,c)=>{let{className:a,...t}=e;return(0,d.jsx)("div",{ref:c,className:(0,r.cn)("flex items-center p-6 pt-0",a),...t})}).displayName="CardFooter"},88743:(e,c,a)=>{"use strict";a.d(c,{p:()=>s});var d=a(74848),t=a(96540),r=a(76985);let s=t.forwardRef((e,c)=>{let{className:a,type:t,...s}=e;return(0,d.jsx)("input",{type:t,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:c,...s})});s.displayName="Input"},40586:(e,c,a)=>{"use strict";a.d(c,{J:()=>l});var d=a(74848),t=a(96540),r=a(95920),s=a(22732),n=a(76985);let i=(0,s.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=t.forwardRef((e,c)=>{let{className:a,...t}=e;return(0,d.jsx)(r.b,{ref:c,className:(0,n.cn)(i(),a),...t})});l.displayName=r.b.displayName},31808:(e,c,a)=>{"use strict";a.d(c,{f:()=>d,u:()=>t});let d={url:"https://cardano-preprod.blockfrost.io/api/v0",projectId:"preprodhrtK1nyhYpdtYRKQjmUDxpgGqzY7uyEq",policyId:"c7842ba56912a2df2f2e1b89f8e11751c6ec2318520f4d312423a272"};async function t(e){let c=await fetch("".concat(d.url).concat(e),{headers:{project_id:d.projectId,"Content-Type":"application/json"}});if(!c.ok)throw Error((await c.json().catch(()=>({message:"Unknown error"}))).message||"HTTP error! status: ".concat(c.status));return c.json()}},96239:(e,c,a)=>{"use strict";function d(e){return!(!e||"object"!=typeof e||!e.name||!e.description||!e.image||"string"!=typeof e.name||"string"!=typeof e.description&&!Array.isArray(e.description)||Array.isArray(e.description)&&!e.description.every(e=>"string"==typeof e))&&"string"==typeof e.image}a.d(c,{a:()=>d})},49795:(e,c,a)=>{"use strict";a.d(c,{c:()=>d});let d=JSON.parse('{"preamble":{"title":"schaier-io/permission-based-wallet","description":"Aiken contracts for project \'schaier-io/permission-based-wallet\'","version":"0.0.0","plutusVersion":"v3","compiler":{"name":"Aiken","version":"v1.1.0+be31a7c"},"license":"Apache-2.0"},"validators":[{"title":"vested_pay.vested_pay.spend","datum":{"title":"datum","schema":{"$ref":"#/definitions/vested_pay~1Datum"}},"redeemer":{"title":"redeemer","schema":{"$ref":"#/definitions/vested_pay~1Action"}},"parameters":[{"title":"admin_vks","schema":{"$ref":"#/definitions/List$VerificationKeyHash"}}],"compiledCode":"590b7f0101003232323232323223225333004323232323253323300a3001300b375400426464646464646464a66602460060022a66602a60286ea802c540085854ccc048c02400454ccc054c050dd50058a8010b0a99980918028008a99980a980a1baa00b150021615333012300400115333015301437540162a0042c2a66602466e1d200800115333015301437540162a0042c2a66602466e1d200a00115333015301437540162a0042c2a66602466e1d200c00115333015301437540162a0042c2c60246ea802854ccc040c004c044dd50020991919191919191919191919191919191919191919191919191919191919191919299981898110088992999819181198199baa001132325333034302530353754002264a66606a6050606c6ea80044c8cc02c00454ccc0d8cc0340c408c54ccc0d94ccc0d8064528099981b2504a094454ccc0d94ccc0d8060528099981b2504a094454ccc0d8cc03805c07454ccc0d94ccc0d8c040dd71808981c1baa00114a0266606c94128251153330363371e6eb8c03cc0e0dd50008128a99981b19b8f375c600e60706ea800408c54ccc0d8cdc79bae3008303837540020422a66606c66e1cdd69809181c1baa00101d153330363370e6eb4c04cc0e0dd500080d8a99981b299981b1816981b9baa30143038375400229404ccc0d9282504a22a66606c605a606e6ea8c054c0e0dd50008a5013330364a0941288a5014a029405280a5014a02c2c2c2c2c6074606e6ea800458c018c0d8dd5181c981b1baa001163007330063758600a606a6ea80b88cdd79806981b1baa001002300b30343754600660686ea8c0dcc0d0dd50008b198009bac300a3033375405804c264a6660646052024264a666066604860686ea80044c8c94ccc0d4c098c0d8dd5000899299981b1814981b9baa0011323300c001153330373300e032026153330373300603202c15333037533303701a14a0266606e9412825115333037533303701914a0266606e9412825115333037325333038302f30393754002266e24dd6981e981d1baa00101f14a0602060726ea8c020c0e4dd500c0a99981ba99981b98089bae30123039375400229444ccc0dd28a504a22a66606e66e3cdd71808181c9baa001026153330373371e6eb8c020c0e4dd50008120a99981b99b8f375c601260726ea800408854ccc0dccdc79bae3012303937540020402a66606e66e1cdd69809981c9baa00101e153330373370e6eb4c050c0e4dd500080e0a99981ba99981b9817181c1baa30153039375400229444ccc0dd28a504a22a66606e605c60706ea8c058c0e4dd50008a5013330374a0941288a5014a029405280a5014a02940585858585858c0ecc0e0dd50008b1803981b9baa303a303737540022c60106600e6eb0c018c0d8dd5017919baf300e303737540020046018606a6ea8c010c0d4dd5181c181a9baa00116330023758601660686ea80b409c54ccc0c8c09004854ccc0c8cc0240b408454ccc0c8cc02804c05c54ccc0c94ccc0c805452889998192514a094454ccc0c805052809998192504a09445280a5016153330323370e900400909929998199812181a1baa001132325333035302630363754002264a66606c6052606e6ea80044c8cc03000454ccc0dccc0380c809054ccc0dccc0180c80b054ccc0dd4ccc0dc068528899981ba514a094454ccc0dd4ccc0dc064528099981ba504a094454ccc0dd4ccc0dcc044dd71809181c9baa00114a0266606e94128251153330373371e6eb8c040c0e4dd50008130a99981b99b8f375c601060726ea800409054ccc0dccdc79bae3009303937540020442a66606e66e1cdd69809981c9baa00101e153330373370e6eb4c050c0e4dd500080e0a99981ba99981b9817181c1baa30153039375400229444ccc0dd28a504a22a66606e605c60706ea8c058c0e4dd50008a5113330374a2941288a5014a029405280a5014a02c2c2c2c2c607660706ea800458c01cc0dcdd5181d181b9baa001163008330073758600c606c6ea80bc8cdd79807181b9baa001002300c303537546008606a6ea8c0e0c0d4dd50008b198011bac300b3034375405a04e2a666064604a024264a666066604860686ea80044c8c94ccc0d4c098c0d8dd5000899299981b1814981b9baa0011323300c001153330373300e032026153330373300603202c15333037533303701a14a2266606e9452825115333037533303701914a0266606e94128251153330373371e6eb8c040c0e4dd50008130a99981b99b8f375c601060726ea800409054ccc0dccdc79bae3009303937540020442a66606e66e3cdd71809181c9baa001020153330373370e6eb4c04cc0e4dd500080f0a99981b99b87375a602860726ea800407054ccc0dd4ccc0dcc0b8c0e0dd5180a981c9baa00114a0266606e9412825115333037302e30383754602c60726ea8004528099981ba504a09445280a5014a029405280a5014a02c2c2c2c607660706ea800458c01cc0dcdd5181d181b9baa001163008330073758600c606c6ea80bc8cdd79807181b9baa001002300c303537546008606a6ea8c0e0c0d4dd50008b198011bac300b3034375405a04e2646464a66606a66e1d200a01515333035533303501814a2266606a9452825115333035533303501714a2266606a94528251153330355333035300f01e14a0266606a9412825115333035302730010331300b30013300303323300d0310011616161615333035533303501814a0266606a9412825115333035533303501714a0266606a94128251153330355333035300f01e14a0266606a9412825115333035302730010331300b30013300303323300d0310011616161630010012253330380011480004cdc02400466004004607600244646600200200644a666072002297ae0132325333038300500213303c375200466008008002266008008002607a0046eb8c0ec00488c94ccc0d0c094c0d4dd50008991919299981b9814181c1baa00113375e601060726ea8c0f0c0e4dd50009804181c9baa3008303937540062c6014660126eb0c020c0e0dd5002919baf301030393754002004601c606e6ea8c018c0dcdd5000981c981b1baa001163300337586018606a6ea800800488c8cc00400400c894ccc0dc004530103d87a80001323253330363375e601e60706ea80080144cdd2a40006607400497ae0133004004001303b0023039001230353036001230343035303500122323300100100322533303400114bd70099192999819980280109981b80119802002000899802002000981c001181b000929998180008a60103d87a800013374a9000198189819000a5eb80894ccc0b4c078c0b8dd5001099191919191919191919191919191919299982018218010a8088b192999820181f8008a99981e9809981f0008b0981a181f0008b1baa3041001304100232533303e303d0011533303b3011303c0011613032303c001163754607e002607e0046eb4c0f4004c0f4008dd6981d800981d8011bae30390013039002375c606e002606e0046eb8c0d4004c0d4008dd7181980098179baa00216371290021119198008009bac303130323032303230323032303230323032302e375400644a66606000229404c94ccc0b8cdc79bae303300200414a226600600600260660024464a666056604460586ea80044cdc48011bad3030302d37540022940c00cc0b0dd5180198161baa0022302d00123018371a002460566058605860580024605460566056605660560024605260546054605460546054002460506052605260526052605260520024604e605060506050605060506050605000260426ea8064c090c094c094c094c094c094c094c094c084dd500d180a980f9baa302330240023014301e3754604400260440046eb4c080004c080008dd6980f000980f0011bae301c001301c002375c603400260340046eb8c060004c060008dd7180b00098091baa3015301237540082c6e1d2000370e90031b8748010c044c048008c040004c030dd50011b874800858c034c038008c030004c030008c028004c018dd50008a4c26cac6eb00055cd2ab9d5573caae7d5d02ba157441","hash":"c91f6d41051878bcced476c6be2bef8dfafce503686144e36bd7a933"},{"title":"vested_pay.vested_pay.else","parameters":[{"title":"admin_vks","schema":{"$ref":"#/definitions/List$VerificationKeyHash"}}],"compiledCode":"590b7f0101003232323232323223225333004323232323253323300a3001300b375400426464646464646464a66602460060022a66602a60286ea802c540085854ccc048c02400454ccc054c050dd50058a8010b0a99980918028008a99980a980a1baa00b150021615333012300400115333015301437540162a0042c2a66602466e1d200800115333015301437540162a0042c2a66602466e1d200a00115333015301437540162a0042c2a66602466e1d200c00115333015301437540162a0042c2c60246ea802854ccc040c004c044dd50020991919191919191919191919191919191919191919191919191919191919191919299981898110088992999819181198199baa001132325333034302530353754002264a66606a6050606c6ea80044c8cc02c00454ccc0d8cc0340c408c54ccc0d94ccc0d8064528099981b2504a094454ccc0d94ccc0d8060528099981b2504a094454ccc0d8cc03805c07454ccc0d94ccc0d8c040dd71808981c1baa00114a0266606c94128251153330363371e6eb8c03cc0e0dd50008128a99981b19b8f375c600e60706ea800408c54ccc0d8cdc79bae3008303837540020422a66606c66e1cdd69809181c1baa00101d153330363370e6eb4c04cc0e0dd500080d8a99981b299981b1816981b9baa30143038375400229404ccc0d9282504a22a66606c605a606e6ea8c054c0e0dd50008a5013330364a0941288a5014a029405280a5014a02c2c2c2c2c6074606e6ea800458c018c0d8dd5181c981b1baa001163007330063758600a606a6ea80b88cdd79806981b1baa001002300b30343754600660686ea8c0dcc0d0dd50008b198009bac300a3033375405804c264a6660646052024264a666066604860686ea80044c8c94ccc0d4c098c0d8dd5000899299981b1814981b9baa0011323300c001153330373300e032026153330373300603202c15333037533303701a14a0266606e9412825115333037533303701914a0266606e9412825115333037325333038302f30393754002266e24dd6981e981d1baa00101f14a0602060726ea8c020c0e4dd500c0a99981ba99981b98089bae30123039375400229444ccc0dd28a504a22a66606e66e3cdd71808181c9baa001026153330373371e6eb8c020c0e4dd50008120a99981b99b8f375c601260726ea800408854ccc0dccdc79bae3012303937540020402a66606e66e1cdd69809981c9baa00101e153330373370e6eb4c050c0e4dd500080e0a99981ba99981b9817181c1baa30153039375400229444ccc0dd28a504a22a66606e605c60706ea8c058c0e4dd50008a5013330374a0941288a5014a029405280a5014a02940585858585858c0ecc0e0dd50008b1803981b9baa303a303737540022c60106600e6eb0c018c0d8dd5017919baf300e303737540020046018606a6ea8c010c0d4dd5181c181a9baa00116330023758601660686ea80b409c54ccc0c8c09004854ccc0c8cc0240b408454ccc0c8cc02804c05c54ccc0c94ccc0c805452889998192514a094454ccc0c805052809998192504a09445280a5016153330323370e900400909929998199812181a1baa001132325333035302630363754002264a66606c6052606e6ea80044c8cc03000454ccc0dccc0380c809054ccc0dccc0180c80b054ccc0dd4ccc0dc068528899981ba514a094454ccc0dd4ccc0dc064528099981ba504a094454ccc0dd4ccc0dcc044dd71809181c9baa00114a0266606e94128251153330373371e6eb8c040c0e4dd50008130a99981b99b8f375c601060726ea800409054ccc0dccdc79bae3009303937540020442a66606e66e1cdd69809981c9baa00101e153330373370e6eb4c050c0e4dd500080e0a99981ba99981b9817181c1baa30153039375400229444ccc0dd28a504a22a66606e605c60706ea8c058c0e4dd50008a5113330374a2941288a5014a029405280a5014a02c2c2c2c2c607660706ea800458c01cc0dcdd5181d181b9baa001163008330073758600c606c6ea80bc8cdd79807181b9baa001002300c303537546008606a6ea8c0e0c0d4dd50008b198011bac300b3034375405a04e2a666064604a024264a666066604860686ea80044c8c94ccc0d4c098c0d8dd5000899299981b1814981b9baa0011323300c001153330373300e032026153330373300603202c15333037533303701a14a2266606e9452825115333037533303701914a0266606e94128251153330373371e6eb8c040c0e4dd50008130a99981b99b8f375c601060726ea800409054ccc0dccdc79bae3009303937540020442a66606e66e3cdd71809181c9baa001020153330373370e6eb4c04cc0e4dd500080f0a99981b99b87375a602860726ea800407054ccc0dd4ccc0dcc0b8c0e0dd5180a981c9baa00114a0266606e9412825115333037302e30383754602c60726ea8004528099981ba504a09445280a5014a029405280a5014a02c2c2c2c607660706ea800458c01cc0dcdd5181d181b9baa001163008330073758600c606c6ea80bc8cdd79807181b9baa001002300c303537546008606a6ea8c0e0c0d4dd50008b198011bac300b3034375405a04e2646464a66606a66e1d200a01515333035533303501814a2266606a9452825115333035533303501714a2266606a94528251153330355333035300f01e14a0266606a9412825115333035302730010331300b30013300303323300d0310011616161615333035533303501814a0266606a9412825115333035533303501714a0266606a94128251153330355333035300f01e14a0266606a9412825115333035302730010331300b30013300303323300d0310011616161630010012253330380011480004cdc02400466004004607600244646600200200644a666072002297ae0132325333038300500213303c375200466008008002266008008002607a0046eb8c0ec00488c94ccc0d0c094c0d4dd50008991919299981b9814181c1baa00113375e601060726ea8c0f0c0e4dd50009804181c9baa3008303937540062c6014660126eb0c020c0e0dd5002919baf301030393754002004601c606e6ea8c018c0dcdd5000981c981b1baa001163300337586018606a6ea800800488c8cc00400400c894ccc0dc004530103d87a80001323253330363375e601e60706ea80080144cdd2a40006607400497ae0133004004001303b0023039001230353036001230343035303500122323300100100322533303400114bd70099192999819980280109981b80119802002000899802002000981c001181b000929998180008a60103d87a800013374a9000198189819000a5eb80894ccc0b4c078c0b8dd5001099191919191919191919191919191919299982018218010a8088b192999820181f8008a99981e9809981f0008b0981a181f0008b1baa3041001304100232533303e303d0011533303b3011303c0011613032303c001163754607e002607e0046eb4c0f4004c0f4008dd6981d800981d8011bae30390013039002375c606e002606e0046eb8c0d4004c0d4008dd7181980098179baa00216371290021119198008009bac303130323032303230323032303230323032302e375400644a66606000229404c94ccc0b8cdc79bae303300200414a226600600600260660024464a666056604460586ea80044cdc48011bad3030302d37540022940c00cc0b0dd5180198161baa0022302d00123018371a002460566058605860580024605460566056605660560024605260546054605460546054002460506052605260526052605260520024604e605060506050605060506050605000260426ea8064c090c094c094c094c094c094c094c094c084dd500d180a980f9baa302330240023014301e3754604400260440046eb4c080004c080008dd6980f000980f0011bae301c001301c002375c603400260340046eb8c060004c060008dd7180b00098091baa3015301237540082c6e1d2000370e90031b8748010c044c048008c040004c030dd50011b874800858c034c038008c030004c030008c028004c018dd50008a4c26cac6eb00055cd2ab9d5573caae7d5d02ba157441","hash":"c91f6d41051878bcced476c6be2bef8dfafce503686144e36bd7a933"}],"definitions":{"Bool":{"title":"Bool","anyOf":[{"title":"False","dataType":"constructor","index":0,"fields":[]},{"title":"True","dataType":"constructor","index":1,"fields":[]}]},"ByteArray":{"dataType":"bytes"},"List$VerificationKeyHash":{"dataType":"list","items":{"$ref":"#/definitions/VerificationKeyHash"}},"POSIXTime":{"title":"POSIXTime","dataType":"integer"},"VerificationKeyHash":{"title":"VerificationKeyHash","dataType":"bytes"},"vested_pay/Action":{"title":"Action","anyOf":[{"title":"Withdraw","dataType":"constructor","index":0,"fields":[]},{"title":"RequestRefund","dataType":"constructor","index":1,"fields":[]},{"title":"CancelRefundRequest","dataType":"constructor","index":2,"fields":[]},{"title":"WithdrawRefund","dataType":"constructor","index":3,"fields":[]},{"title":"DenyRefund","dataType":"constructor","index":4,"fields":[]},{"title":"WithdrawDisputed","dataType":"constructor","index":5,"fields":[]},{"title":"WithdrawFee","dataType":"constructor","index":6,"fields":[]}]},"vested_pay/Datum":{"title":"Datum","anyOf":[{"title":"Datum","dataType":"constructor","index":0,"fields":[{"title":"buyer","$ref":"#/definitions/VerificationKeyHash"},{"title":"seller","$ref":"#/definitions/VerificationKeyHash"},{"title":"referenceId","$ref":"#/definitions/ByteArray"},{"title":"resultHash","$ref":"#/definitions/ByteArray"},{"title":"unlock_time","$ref":"#/definitions/POSIXTime"},{"title":"refund_time","$ref":"#/definitions/POSIXTime"},{"title":"refund_requested","$ref":"#/definitions/Bool"},{"title":"refund_denied","$ref":"#/definitions/Bool"}]}]}}}')},31193:(e,c,a)=>{"use strict";a.a(e,async(e,d)=>{try{a.r(c),a.d(c,{default:()=>w});var t=a(74848),r=a(96540),s=a(86715),n=a(70220),i=a(7436),l=a(30551),o=a(88743),b=a(11741),f=a(40586),u=a(81277),m=a(97405),p=a(71434),h=a(49795),y=a(31808),x=a(91106),g=a.n(x),v=a(96239),j=e([n,i]);function w(){let e=(0,s.useRouter)(),{id:c}=e.query,{connected:a,wallet:d}=(0,n.vT)(),[x,j]=(0,r.useState)(!1),[w,N]=(0,r.useState)(null),[k,T]=(0,r.useState)({referenceId:"",amount:"50"}),[A,_]=(0,r.useState)(null),[I,D]=(0,r.useState)([]),S=e=>{console.log(e),D(c=>[...c,"".concat(new Date().toISOString(),": ").concat(e)])};(0,r.useEffect)(()=>{(async()=>{if(c)try{S("Checking metadata validity...");let a=await (0,y.u)("/assets/".concat(c));S("Fetched asset data");let d=(0,v.a)(a.onchain_metadata);S("Metadata validation result: ".concat(d?"Valid":"Invalid")),d||(S("Invalid metadata, redirecting to agent details"),e.push("/agents/".concat(c)))}catch(a){S("Error checking metadata: ".concat(a)),e.push("/agents/".concat(c))}})()},[c,e]),(0,r.useEffect)(()=>{(async()=>{if(c)try{var e,a,d;S("Fetching agent details...");let t=await (0,y.u)("/assets/".concat(c));S("Agent data fetched");let r=Array.isArray(null===(e=t.onchain_metadata)||void 0===e?void 0:e.payment_address)?t.onchain_metadata.payment_address.join(""):(null===(a=t.onchain_metadata)||void 0===a?void 0:a.payment_address)||"";S("Payment address resolved: ".concat(r.slice(0,20),"...")),N({name:(null===(d=t.onchain_metadata)||void 0===d?void 0:d.name)||"Unnamed Agent",paymentAddress:r})}catch(e){S("Error fetching agent details: ".concat(e))}})()},[c]);let R=async()=>{if(!a||!d){S("Payment attempted without wallet connection");return}try{j(!0),S("Starting payment process...");let e=await d.getUtxos();if(0===e.length)throw Error("No UTXOs found in the wallet. Wallet is empty.");S("Found ".concat(e.length," UTXOs"));let c=await d.getChangeAddress();S("Buyer address: ".concat(c));let a=(0,i.Q6)(c);S("Buyer verification key hash: ".concat(a));let t=(null==w?void 0:w.paymentAddress)||"";if(!t)throw Error("No payment address found for this agent");S("Seller address: ".concat(t));let r=(0,i.Q6)(t);S("Seller verification key hash: ".concat(r)),S("Creating payment script with admin addresses...");let s={code:(0,i.He)(h.c.validators[0].compiledCode,[[(0,i.Q6)("addr_test1qrgpga399l0r8fg7n0jfshhxsjl26w0uslxf5m02yclur8mremst4rk8xsz9lx78e9sdtjfsyj3c9kll2c4958uhkals2qrm9q"),(0,i.Q6)("addr_test1qqturqflellkrv0kcg9guuzkk8wx5yaytpsfcd3mmvemg0v7akaxvzel56ls59kw2fs20ckxhs09365medeen6tyy0pqkx3hku"),(0,i.Q6)("addr_test1qz93vk0v6jcy4n8g4w3srqkjmcy6ryw90gngx0llvyek5rsc665n90486m4vvue3c2dsjg8sw3tchkjzgxgp4y77rkxqgxjd2h")]]),version:"V3"},n=Date.now()+18e5,l=Date.now()+36e5;S("Contract parameters:\n        Reference ID: ".concat(k.referenceId,"\n        Unlock Time: ").concat(new Date(n).toISOString(),"\n        Refund Time: ").concat(new Date(l).toISOString(),"\n        Amount: ").concat(k.amount," ADA\n      "));let o={value:{alternative:0,fields:[a,r,k.referenceId,"",n,l,(0,i.Q9)(!0),(0,i.Q9)(!1)]},inline:!0};S("Created datum structure:"),S(JSON.stringify({buyerVerificationKeyHash:a,sellerVerificationKeyHash:r,referenceId:k.referenceId,resultHash:"",unlockTime:new Date(n).toISOString(),refundTime:new Date(l).toISOString(),refundRequested:!0,refundDenied:!1},null,2)),S("Raw datum:"),S(JSON.stringify(o,null,2)),S("Building transaction...");let b=(0,i.j4)(s,0);S("Script address: ".concat(b));let f=new i.ZX({initiator:d}).sendLovelace({address:b,datum:o},"".concat(1e6*parseInt(k.amount)));S("Building unsigned transaction...");let u=await f.build();S("Transaction built"),S("Signing transaction...");let m=await d.signTx(u);S("Transaction signed"),S("Submitting transaction...");let p=await d.submitTx(m);S("Transaction submitted with hash: ".concat(p)),_(p)}catch(c){let e=c instanceof Error?c.message:"Unknown error";S("ERROR: ".concat(e)),console.error("Payment error:",c)}finally{j(!1)}};return w?(0,t.jsxs)("div",{className:"container mx-auto py-8",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("h1",{className:"text-2xl font-semibold",children:["Interact with ",null==w?void 0:w.name]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Make a payment to use this agent"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,t.jsxs)("div",{className:"col-span-12 lg:col-span-8",children:[(0,t.jsxs)(u.Fc,{className:"mb-6",children:[(0,t.jsx)(m.A,{className:"h-4 w-4"}),(0,t.jsx)(u.XL,{children:"How it works"}),(0,t.jsxs)(u.TN,{children:["1. Enter a reference ID for your interaction",(0,t.jsx)("br",{}),"2. Choose the amount to pay (minimum 50 ADA)",(0,t.jsx)("br",{}),"3. Your payment will be held in a smart contract",(0,t.jsx)("br",{}),"4. The agent provider has 30 minutes to fulfill your request",(0,t.jsx)("br",{}),"5. You can request a refund if not satisfied"]})]}),(0,t.jsx)(b.Zp,{className:"p-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(f.J,{htmlFor:"referenceId",children:"Reference ID"}),(0,t.jsx)(o.p,{id:"referenceId",value:k.referenceId,onChange:e=>T(c=>({...c,referenceId:e.target.value})),placeholder:"Enter a reference ID for this interaction"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"This ID will be used to track your interaction"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(f.J,{htmlFor:"amount",children:"Amount (ADA)"}),(0,t.jsx)(o.p,{id:"amount",type:"number",value:k.amount,onChange:e=>T(c=>({...c,amount:e.target.value})),min:"50"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Minimum amount is 50 ADA"})]}),(0,t.jsx)(l.$,{onClick:R,disabled:x||!a||!(null==w?void 0:w.paymentAddress),className:"w-full",children:x?"Processing...":"Make Payment"})]})})]}),(0,t.jsxs)("div",{className:"col-span-12 lg:col-span-4 space-y-6",children:[(0,t.jsxs)(b.Zp,{className:"p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Payment Details"}),(null==w?void 0:w.paymentAddress)?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(f.J,{children:"Payment Address"}),(0,t.jsx)("p",{className:"text-sm font-mono break-all mt-1",children:w.paymentAddress})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(f.J,{children:"Contract Terms"}),(0,t.jsxs)("ul",{className:"text-sm text-muted-foreground mt-1 list-disc list-inside",children:[(0,t.jsx)("li",{children:"30 minute fulfillment window"}),(0,t.jsx)("li",{children:"1 hour refund dispute period"}),(0,t.jsx)("li",{children:"Protected by smart contract"})]})]})]}):(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading payment details..."})]}),A&&(0,t.jsxs)(b.Zp,{className:"p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Transaction Status"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm text-green-600",children:"Payment Successful!"}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground break-all",children:["Transaction: ",A]}),(0,t.jsxs)(g(),{href:"https://preprod.cardanoscan.io/transaction/".concat(A),target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary hover:underline flex items-center gap-1",children:["View on Cardanoscan",(0,t.jsx)(p.A,{className:"h-3 w-3"})]})]})]}),(0,t.jsxs)(b.Zp,{className:"p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Debug Information"}),(0,t.jsx)("div",{className:"space-y-2 text-xs font-mono max-h-[400px] overflow-y-auto",children:I.map((e,c)=>(0,t.jsx)("div",{className:"text-muted-foreground",children:e},c))})]})]})]})]}):(0,t.jsx)("div",{className:"p-6 text-center",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"Verifying agent metadata..."})})}[n,i]=j.then?(await j)():j,d()}catch(e){d(e)}})},86715:(e,c,a)=>{e.exports=a(74009)},95920:(e,c,a)=>{"use strict";a.d(c,{b:()=>n});var d=a(96540),t=a(12579),r=a(74848),s=d.forwardRef((e,c)=>(0,r.jsx)(t.sG.label,{...e,ref:c,onMouseDown:c=>{c.target.closest("button, input, select, textarea")||(e.onMouseDown?.(c),!c.defaultPrevented&&c.detail>1&&c.preventDefault())}}));s.displayName="Label";var n=s}},e=>{var c=c=>e(e.s=c);e.O(0,[287,436,636,593,792],()=>c(83322)),_N_E=e.O()}]);
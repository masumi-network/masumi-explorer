(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[632],{55833:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/agents/[id]",function(){return a(1187)}])},60875:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(46471).A)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},17947:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(46471).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},97405:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(46471).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},90196:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(46471).A)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},88003:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(46471).A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},79351:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(46471).A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},75798:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(46471).A)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},81277:(e,t,a)=>{"use strict";a.d(t,{Fc:()=>d,TN:()=>o,XL:()=>l});var s=a(74848),n=a(96540),r=a(22732),i=a(76985);let c=(0,r.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=n.forwardRef((e,t)=>{let{className:a,variant:n,...r}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(c({variant:n}),a),...r})});d.displayName="Alert";let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",a),...n})});l.displayName="AlertTitle";let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",a),...n})});o.displayName="AlertDescription"},8286:(e,t,a)=>{"use strict";a.d(t,{E:()=>c});var s=a(74848);a(96540);var n=a(22732),r=a(76985);let i=(0,n.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:a,...n}=e;return(0,s.jsx)("div",{className:(0,r.cn)(i({variant:a}),t),...n})}},11741:(e,t,a)=>{"use strict";a.d(t,{Zp:()=>i});var s=a(74848),n=a(96540),r=a(76985);let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("shadow border border-border rounded-2xl",a),...n})});i.displayName="Card",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a),...n})}).displayName="CardHeader",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",a),...n})}).displayName="CardTitle",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",a),...n})}).displayName="CardDescription",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",a),...n})}).displayName="CardContent",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",a),...n})}).displayName="CardFooter"},85575:(e,t,a)=>{"use strict";a.d(t,{m:()=>i});var s=a(74848),n=a(97405),r=a(81277);function i(){return(0,s.jsxs)(r.Fc,{variant:"destructive",children:[(0,s.jsx)(n.A,{className:"h-4 w-4"}),(0,s.jsx)(r.XL,{children:"Interaction Disabled"}),(0,s.jsx)(r.TN,{children:"This agent does not meet the metadata standards required for interaction. Please ensure all required metadata fields are properly set."})]})}},70566:(e,t,a)=>{"use strict";a.d(t,{tU:()=>C,av:()=>q,j7:()=>D,Xi:()=>E});var s=a(74848),n=a(96540),r=a(9957),i=a(62133),c=a(76278),d=a(7971),l=a(12579),o=a(71427),m=a(81351),u=a(18723),x="Tabs",[h,f]=(0,i.A)(x,[c.RG]),p=(0,c.RG)(),[g,v]=h(x),j=n.forwardRef((e,t)=>{let{__scopeTabs:a,value:n,onValueChange:r,defaultValue:i,orientation:c="horizontal",dir:d,activationMode:x="automatic",...h}=e,f=(0,o.jH)(d),[p,v]=(0,m.i)({prop:n,onChange:r,defaultProp:i});return(0,s.jsx)(g,{scope:a,baseId:(0,u.B)(),value:p,onValueChange:v,orientation:c,dir:f,activationMode:x,children:(0,s.jsx)(l.sG.div,{dir:f,"data-orientation":c,...h,ref:t})})});j.displayName=x;var b="TabsList",y=n.forwardRef((e,t)=>{let{__scopeTabs:a,loop:n=!0,...r}=e,i=v(b,a),d=p(a);return(0,s.jsx)(c.bL,{asChild:!0,...d,orientation:i.orientation,dir:i.dir,loop:n,children:(0,s.jsx)(l.sG.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:t})})});y.displayName=b;var N="TabsTrigger",w=n.forwardRef((e,t)=>{let{__scopeTabs:a,value:n,disabled:i=!1,...d}=e,o=v(N,a),m=p(a),u=_(o.baseId,n),x=R(o.baseId,n),h=n===o.value;return(0,s.jsx)(c.q7,{asChild:!0,...m,focusable:!i,active:h,children:(0,s.jsx)(l.sG.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":x,"data-state":h?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:u,...d,ref:t,onMouseDown:(0,r.m)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(n)}),onKeyDown:(0,r.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(n)}),onFocus:(0,r.m)(e.onFocus,()=>{let e="manual"!==o.activationMode;h||i||!e||o.onValueChange(n)})})})});w.displayName=N;var A="TabsContent",k=n.forwardRef((e,t)=>{let{__scopeTabs:a,value:r,forceMount:i,children:c,...o}=e,m=v(A,a),u=_(m.baseId,r),x=R(m.baseId,r),h=r===m.value,f=n.useRef(h);return n.useEffect(()=>{let e=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,s.jsx)(d.C,{present:i||h,children:({present:a})=>(0,s.jsx)(l.sG.div,{"data-state":h?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":u,hidden:!a,id:x,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:a&&c})})});function _(e,t){return`${e}-trigger-${t}`}function R(e,t){return`${e}-content-${t}`}k.displayName=A;var T=a(76985);let C=j,D=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(y,{ref:t,className:(0,T.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...n})});D.displayName=y.displayName;let E=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(w,{ref:t,className:(0,T.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...n})});E.displayName=w.displayName;let q=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(k,{ref:t,className:(0,T.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...n})});q.displayName=k.displayName},31808:(e,t,a)=>{"use strict";a.d(t,{f:()=>s,u:()=>n});let s={url:"https://cardano-preprod.blockfrost.io/api/v0",projectId:"preprodhrtK1nyhYpdtYRKQjmUDxpgGqzY7uyEq",policyId:"c7842ba56912a2df2f2e1b89f8e11751c6ec2318520f4d312423a272"};async function n(e){let t=await fetch("".concat(s.url).concat(e),{headers:{project_id:s.projectId,"Content-Type":"application/json"}});if(!t.ok)throw Error((await t.json().catch(()=>({message:"Unknown error"}))).message||"HTTP error! status: ".concat(t.status));return t.json()}},96239:(e,t,a)=>{"use strict";function s(e){return!(!e||"object"!=typeof e||!e.name||!e.description||!e.image||"string"!=typeof e.name||"string"!=typeof e.description&&!Array.isArray(e.description)||Array.isArray(e.description)&&!e.description.every(e=>"string"==typeof e))&&"string"==typeof e.image}a.d(t,{a:()=>s})},85386:(e,t,a)=>{"use strict";a.d(t,{Y:()=>s});let s=JSON.parse('{"preamble":{"title":"schaier-io/permission-based-wallet","description":"Aiken contracts for project \'schaier-io/permission-based-wallet\'","version":"0.0.0","plutusVersion":"v3","compiler":{"name":"Aiken","version":"v1.1.0+be31a7c"},"license":"Apache-2.0"},"validators":[{"title":"mint.mintUnique.mint","redeemer":{"title":"redeemer","schema":{"$ref":"#/definitions/mint~1Action"}},"parameters":[{"title":"_paymentContractAddress","schema":{"$ref":"#/definitions/ByteArray"}}],"compiledCode":"59021c0101003232323232323223225333004323232323253323300a3001300b3754004264646464a66601c600a0022a66602260206ea801c540085854ccc038c00c00454ccc044c040dd50038a8010b0b18071baa00613232323232325333015301800213232325333015300c3016375401c264a66602c601a602e6ea80044c94ccc05ccdc78029b9432337146eb8c004c068dd51800980d1baa0023337929452008375a603a603c60346ea8c004c068dd50011180e8008a99980b9806002098060018a5014a0603660306ea800458ccc8c0040048894ccc06c0085300103d87a800013232533301a301100313374a90001980f00125eb804ccc014014004cdc0001a4002603e006603a00401090000a99980a99b87002480044c02800452819198008009980300380591299980c8008a4000266e01200233002002301c001375a602a0046eb8c04c00458c058004cc00400801888c94ccc048c01cc04cdd50008a5eb7bdb1804dd5980b980a1baa001323300100100322533301600114c103d87a800013232323253330173372200e0042a66602e66e3c01c0084cdd2a4000660366e980052f5c02980103d87a8000133006006003375660300066eb8c058008c068008c060004dd59809980a180a180a180a0011bac3012001300e375400e6e1d2002375c601e60186ea8008dc3a40002c601a601c004601800260180046014002600c6ea800452613656375c002ae6955ceaab9e5573eae815d0aba201","hash":"af9ed1537dd07c3039f8b666ea74c8b262063b9713ba2823d10fc288"},{"title":"mint.mintUnique.else","parameters":[{"title":"_paymentContractAddress","schema":{"$ref":"#/definitions/ByteArray"}}],"compiledCode":"59021c0101003232323232323223225333004323232323253323300a3001300b3754004264646464a66601c600a0022a66602260206ea801c540085854ccc038c00c00454ccc044c040dd50038a8010b0b18071baa00613232323232325333015301800213232325333015300c3016375401c264a66602c601a602e6ea80044c94ccc05ccdc78029b9432337146eb8c004c068dd51800980d1baa0023337929452008375a603a603c60346ea8c004c068dd50011180e8008a99980b9806002098060018a5014a0603660306ea800458ccc8c0040048894ccc06c0085300103d87a800013232533301a301100313374a90001980f00125eb804ccc014014004cdc0001a4002603e006603a00401090000a99980a99b87002480044c02800452819198008009980300380591299980c8008a4000266e01200233002002301c001375a602a0046eb8c04c00458c058004cc00400801888c94ccc048c01cc04cdd50008a5eb7bdb1804dd5980b980a1baa001323300100100322533301600114c103d87a800013232323253330173372200e0042a66602e66e3c01c0084cdd2a4000660366e980052f5c02980103d87a8000133006006003375660300066eb8c058008c068008c060004dd59809980a180a180a180a0011bac3012001300e375400e6e1d2002375c601e60186ea8008dc3a40002c601a601c004601800260180046014002600c6ea800452613656375c002ae6955ceaab9e5573eae815d0aba201","hash":"af9ed1537dd07c3039f8b666ea74c8b262063b9713ba2823d10fc288"}],"definitions":{"ByteArray":{"dataType":"bytes"},"mint/Action":{"title":"Action","anyOf":[{"title":"MintAction","dataType":"constructor","index":0,"fields":[]},{"title":"BurnAction","dataType":"constructor","index":1,"fields":[]}]}}}')},1187:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>q});var n=a(74848),r=a(86715),i=a(96540),c=a(31808),d=a(30551),l=a(11741),o=a(8286),m=a(70566),u=a(71434),x=a(17947),h=a(75798),f=a(88003),p=a(60875),g=a(79351),v=a(90196),j=a(8564),b=a(37644),y=a(91106),N=a.n(y),w=a(96239),A=a(70220),k=a(7436),_=a(85386),R=a(65166),T=a(85575),C=a(76985),D=a(48287).Buffer,E=e([A,k]);function q(){var e,t;let a=(0,r.useRouter)(),{id:s}=a.query,{connected:y,wallet:E}=(0,A.vT)(),[q,S]=(0,i.useState)(null),[I,F]=(0,i.useState)(!0),[H,O]=(0,i.useState)(!1),[P,U]=(0,i.useState)(!1),[V,M]=(0,i.useState)([]),[L,$]=(0,i.useState)(!1),[z,X]=(0,i.useState)(null),[B,Z]=(0,i.useState)([]),[K,Y]=(0,i.useState)([]);(0,i.useEffect)(()=>{(async()=>{if(s)try{var e,t,a,n,r,i,d,l,o,m,u,x,h,f,p,g,v,j;console.log("Fetching asset:",s);let b=await (0,c.u)("/assets/".concat(s));console.log("Asset data:",b);let y=await (0,c.u)("/txs/".concat(b.initial_mint_tx_hash));console.log("Transaction details:",y);let N=parseInt(b.quantity||"0");S({asset:s,name:(null===(e=b.onchain_metadata)||void 0===e?void 0:e.name)||"Unnamed Agent",description:(null===(t=b.onchain_metadata)||void 0===t?void 0:t.description)||"No description available",author:(null===(n=b.onchain_metadata)||void 0===n?void 0:null===(a=n.author)||void 0===a?void 0:a.name)||"Unknown Author",authorContact:null===(i=b.onchain_metadata)||void 0===i?void 0:null===(r=i.author)||void 0===r?void 0:r.contact,organization:null===(l=b.onchain_metadata)||void 0===l?void 0:null===(d=l.author)||void 0===d?void 0:d.organization,registeredAt:new Date(1e3*y.block_time).toLocaleString(),identityVerified:(null===(o=b.onchain_metadata)||void 0===o?void 0:o.identity_verified)||!1,metadataCorrect:(0,w.a)(b.onchain_metadata),apiUrl:null===(m=b.onchain_metadata)||void 0===m?void 0:m.api_url,capabilities:(null===(u=b.onchain_metadata)||void 0===u?void 0:u.tags)||[],version:(null===(x=b.onchain_metadata)||void 0===x?void 0:x.version)||"1.0.0",lastActive:new Date().toLocaleString(),totalRequests:(null===(h=b.onchain_metadata)||void 0===h?void 0:h.requests_per_hour)||0,successRate:95+5*Math.random(),policyId:b.policy_id,exampleOutput:null===(f=b.onchain_metadata)||void 0===f?void 0:f.example_output,legal:null===(p=b.onchain_metadata)||void 0===p?void 0:p.legal,image:null===(g=b.onchain_metadata)||void 0===g?void 0:g.image,rawMetadata:b.onchain_metadata,amount:N,status:N>0?"active":"retired",paymentAddress:Array.isArray(null===(v=b.onchain_metadata)||void 0===v?void 0:v.payment_address)?b.onchain_metadata.payment_address.join(""):(null===(j=b.onchain_metadata)||void 0===j?void 0:j.payment_address)||""})}catch(e){console.error("Error fetching agent details:",e)}finally{F(!1)}})()},[s]),(0,i.useEffect)(()=>{(async()=>{if(y&&q)try{let e=await E.getAssets();O(e.some(e=>e.unit===q.asset))}catch(e){console.error("Error checking ownership:",e),O(!1)}else O(!1)})()},[y,E,q]),(0,i.useEffect)(()=>{(async()=>{if(null==q?void 0:q.paymentAddress)try{G("Fetching transactions..."),G("Agent payment address: ".concat(q.paymentAddress));let e=await (0,c.u)("/addresses/addr_test1wr3hvt2hw89l6ay85lr0f2nr80tckrnpjr808dxhq39xkssvw7mx8/utxos");G("Found ".concat(e.length," UTXOs at script address"));let t=(await Promise.all(e.map(async e=>{try{G("Processing UTXO: ".concat(e.tx_hash));let t=(await (0,c.u)("/txs/".concat(e.tx_hash,"/utxos"))).outputs.find(e=>"addr_test1wr3hvt2hw89l6ay85lr0f2nr80tckrnpjr808dxhq39xkssvw7mx8"===e.address);if(!(null==t?void 0:t.data_hash))return G("No data hash found for tx ".concat(e.tx_hash)),null;G("Found data hash: ".concat(t.data_hash)),G("Fetching datum for hash: ".concat(t.data_hash));let a=await (0,c.u)("/scripts/datum/".concat(t.data_hash));if(!(null==a?void 0:a.json_value))return G("No datum found for hash ".concat(t.data_hash)),null;let s=a.json_value;G("Datum fields: ".concat(JSON.stringify(s.fields,null,2)));let n=s.fields[1].bytes,r=(0,k.Q6)(q.paymentAddress);if(G("Seller PKH from datum: ".concat(n)),G("Seller PKH from address: ".concat(r)),n===r){G("Match found! Transaction belongs to this agent");let a=await (0,c.u)("/txs/".concat(e.tx_hash)),n=t.amount.find(e=>"lovelace"===e.unit);if(!n)return G("No lovelace amount found in tx ".concat(e.tx_hash)),null;G("Amount: ".concat(parseInt(n.quantity)/1e6," ADA"));let r=D.from(s.fields[2].bytes,"hex").toString("utf8");return G("Reference ID: ".concat(r)),{txHash:e.tx_hash,amount:n.quantity,timestamp:a.block_time,status:"pending",referenceId:r,type:"selling",buyerPkh:s.fields[0].bytes,state:"locked",unlockTime:0,refundTime:0,actions:{canRequestRefund:!1,canUnlock:!1,canDenyRefund:!1,canWithdrawRefund:!1,canCancelRefundRequest:!1,canDisputeRefund:!1}}}return G("No match - different seller PKH"),G("Datum PKH: ".concat(n)),G("Address PKH: ".concat(r)),null}catch(t){return G("Error processing transaction ".concat(e.tx_hash,": ").concat(t)),t instanceof Error&&G("Error stack: ".concat(t.stack)),null}}))).filter(Boolean).sort((e,t)=>t.timestamp-e.timestamp);Z(t),G("Found ".concat(t.length," transactions for this agent")),t.length>0&&(G("Transaction details:"),t.forEach(e=>{G(JSON.stringify(e,null,2))}))}catch(e){console.error("Error fetching transactions:",e),G("Error fetching transactions: ".concat(e)),e instanceof Error&&G("Error stack: ".concat(e.stack))}})()},[null==q?void 0:q.paymentAddress]),(0,i.useEffect)(()=>{(async()=>{if(y&&E)try{let e=await E.getChangeAddress(),t=(0,k.Q6)(e);G("Checking transactions for wallet PKH: ".concat(t));let a=B.filter(e=>e.buyerPkh===t);Y(a)}catch(e){console.error("Error checking wallet transactions:",e)}})()},[y,E,B]);let G=e=>{console.log(e),M(t=>[...t,"".concat(new Date().toISOString(),": ").concat(e)])},W=async()=>{if(y&&q&&H)try{U(!0),G("Starting deregistration process...");let e="c7842ba56912a2df2f2e1b89f8e11751c6ec2318520f4d312423a272";G("Using official policy ID: ".concat(e));let t=await E.getUtxos();if(G("Found ".concat(t.length," UTXOs")),0===t.length)throw Error("No UTXOs found for the wallet");t.forEach((e,t)=>{G("UTXO ".concat(t+1,":")),G("  TxHash: ".concat(e.input.txHash)),G("  OutputIndex: ".concat(e.input.outputIndex)),e.output.amount.forEach(e=>{G("  Amount: ".concat(e.quantity," ").concat(e.unit))})});let a="".concat(e).concat(q.asset.slice(56));G("Looking for asset: ".concat(a));let s=t.find(e=>e.output.amount.some(e=>e.unit===a));if(!s)throw Error("Token not found in wallet");G("Found token UTXO");let n={code:(0,k.He)(_.Y.validators[0].compiledCode,["addr_test1wr3hvt2hw89l6ay85lr0f2nr80tckrnpjr808dxhq39xkssvw7mx8"]),version:"V3"},r=q.asset.slice(56);G("Using Asset Name: ".concat(r));let i=new k.ZX({initiator:E}).setTxInputs([s]);i.isCollateralNeeded=!0,G("Setting up token burning..."),i.txBuilder.mintPlutusScript(n.version).mint("-1",e,r).mintingScript(n.code).mintRedeemerValue({alternative:1,fields:[]},"Mesh");let c=await E.getChangeAddress();G("Change address: ".concat(c)),i.sendLovelace(c,"5000000").setRequiredSigners([c]).setChangeAddress(c),G("Transaction configured"),G("Building transaction...");let d=await i.build();G("Transaction built");let l=await E.signTx(d,!0);G("Transaction signed");let o=await E.submitTx(l);X(o),G("Transaction submitted: ".concat(o)),$(!0)}catch(t){let e=t instanceof Error?t.message:"Unknown error";G("ERROR: ".concat(e)),console.error("Error deregistering agent:",t)}finally{U(!1)}},J=(e,t,a,s,n)=>{let r={canRequestRefund:!1,canUnlock:!1,canDenyRefund:!1,canWithdrawRefund:!1,canCancelRefundRequest:!1,canDisputeRefund:!1};switch(e.state){case"locked":r.canUnlock=a,r.canRequestRefund=t&&n>e.unlockTime;break;case"refundRequested":r.canDenyRefund=a,r.canWithdrawRefund=t&&n>e.refundTime,r.canCancelRefundRequest=t;break;case"refundDenied":r.canDisputeRefund=t,r.canWithdrawRefund=s}return r},Q=e=>{let{tx:t,isBuyer:a,isSeller:s,isAdmin:r}=e,i=Date.now(),c=J(t,a,s,r,i);return(0,n.jsx)(l.Zp,{className:(0,C.cn)("p-4",a&&"border-primary/20"),children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{className:"font-medium",children:["Reference ID: ",t.referenceId]}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(1e3*t.timestamp).toLocaleString()})]}),(0,n.jsx)("div",{className:"text-right",children:(0,n.jsxs)("p",{className:"font-medium",children:[parseInt(t.amount)/1e6," ADA"]})})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(o.E,{variant:"completed"===t.state?"default":"refunded"===t.state?"destructive":"disputed"===t.state?"destructive":"secondary",children:t.state}),a&&(0,n.jsx)(o.E,{variant:"outline",children:"Your Transaction"}),s&&(0,n.jsx)(o.E,{variant:"outline",children:"Your Agent"})]}),(0,n.jsx)("div",{className:"relative pl-4 border-l border-muted",children:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"absolute left-0 w-2 h-2 -translate-x-[5px] rounded-full bg-primary"}),(0,n.jsx)("p",{className:"text-sm",children:"Funds Locked"}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:new Date(1e3*t.timestamp).toLocaleString()})]}),"locked"!==t.state&&(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"absolute left-0 w-2 h-2 -translate-x-[5px] rounded-full bg-primary"}),(0,n.jsx)("p",{className:"text-sm",children:"completed"===t.state?"Result Provided":"refundRequested"===t.state?"Refund Requested":"refundDenied"===t.state?"Refund Denied":"refunded"===t.state?"Refunded":"disputed"===t.state?"Disputed":""}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:new Date(1e3*t.timestamp).toLocaleString()})]})]})}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-sm font-medium",children:"Next Steps:"}),Object.entries(c).map(e=>{let[t,a]=e;return a&&(0,n.jsx)(d.$,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{},children:t.replace(/([A-Z])/g," $1").trim()},t)}),!Object.values(c).some(Boolean)&&(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"No actions available"})]}),"locked"===t.state&&(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:i<t.unlockTime?(0,n.jsxs)(n.Fragment,{children:["Refund available in ",Math.ceil((t.unlockTime-i)/1e3/60)," minutes"]}):(0,n.jsx)(n.Fragment,{children:"Refund available now"})}),"refundRequested"===t.state&&(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:i<t.refundTime?(0,n.jsxs)(n.Fragment,{children:["Auto-refund in ",Math.ceil((t.refundTime-i)/1e3/60)," minutes"]}):(0,n.jsx)(n.Fragment,{children:"Auto-refund available now"})}),(0,n.jsx)("div",{className:"text-right",children:(0,n.jsxs)(N(),{href:"https://preprod.cardanoscan.io/transaction/".concat(t.txHash),target:"_blank",className:"text-xs text-primary hover:underline flex items-center gap-1 justify-end",children:["View Transaction",(0,n.jsx)(u.A,{className:"h-3 w-3"})]})})]})},t.txHash)};return I?(0,n.jsx)("div",{className:"p-6 text-center",children:(0,n.jsx)("p",{className:"text-muted-foreground",children:"Loading agent details..."})}):q?(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex flex-col gap-4 mb-7",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsxs)(d.$,{variant:"ghost",size:"sm",onClick:()=>a.back(),className:"gap-2",children:[(0,n.jsx)(x.A,{className:"h-4 w-4"}),"Back"]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold",children:q.name}),(0,n.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Version ",q.version]})]}),H&&(0,n.jsx)(o.E,{variant:"secondary",children:"Owned by you"})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[H&&(0,n.jsx)(d.$,{variant:"destructive",onClick:W,disabled:P,className:"gap-2",children:P?(0,n.jsx)(n.Fragment,{children:"Deregistering..."}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.A,{className:"h-4 w-4"}),"Deregister Agent"]})}),(0,n.jsxs)(R.m_,{children:[(0,n.jsx)(R.k$,{asChild:!0,children:(0,n.jsx)("span",{children:q.metadataCorrect?(0,n.jsx)(N(),{href:"/agents/".concat(s,"/interact"),children:(0,n.jsxs)(d.$,{className:"gap-2",children:[(0,n.jsx)(f.A,{className:"h-4 w-4"}),"Interact with Agent"]})}):(0,n.jsxs)(d.$,{className:"gap-2",disabled:!0,children:[(0,n.jsx)(f.A,{className:"h-4 w-4"}),"Interact with Agent"]})})}),!q.metadataCorrect&&(0,n.jsx)(R.ZI,{children:(0,n.jsx)("p",{children:"Interaction disabled: Metadata standards not met"})})]}),(0,n.jsx)(N(),{href:"https://preprod.cardanoscan.io/token/".concat(q.asset),target:"_blank",rel:"noopener noreferrer",children:(0,n.jsx)(d.$,{variant:"outline",size:"icon",children:(0,n.jsx)(u.A,{className:"h-4 w-4"})})})]})]}),!q.metadataCorrect&&(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(T.m,{})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-12 gap-7",children:[(0,n.jsx)("div",{className:"col-span-12 lg:col-span-8 space-y-6",children:(0,n.jsx)(l.Zp,{className:"p-6",children:(0,n.jsxs)(m.tU,{defaultValue:"overview",children:[(0,n.jsxs)(m.j7,{children:[(0,n.jsx)(m.Xi,{value:"overview",children:"Overview"}),(0,n.jsx)(m.Xi,{value:"activity",children:"Activity"})]}),(0,n.jsxs)(m.av,{value:"overview",className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-lg font-medium mb-2",children:"About"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:q.description})]}),q.metadataCorrect&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-lg font-medium mb-2",children:"Author Information"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Name"}),(0,n.jsx)("p",{className:"font-medium",children:q.author})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Organization"}),(0,n.jsx)("p",{className:"font-medium",children:q.organization})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Contact"}),(0,n.jsx)("p",{className:"font-medium",children:q.authorContact})]})]})]}),q.metadataCorrect&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-lg font-medium mb-2",children:"Technical Details"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"API URL"}),(0,n.jsx)("p",{className:"font-medium font-mono",children:q.apiUrl})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Requests per Hour"}),(0,n.jsx)("p",{className:"font-medium",children:q.totalRequests})]})]})]}),q.metadataCorrect&&q.capabilities&&q.capabilities.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-lg font-medium mb-2",children:"Tags"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:q.capabilities.map((e,t)=>(0,n.jsx)(o.E,{variant:"secondary",children:e},t))})]}),q.metadataCorrect&&q.legal&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-lg font-medium mb-2",children:"Legal Documentation"}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Privacy Policy"}),(0,n.jsx)(N(),{href:q.legal["privacy policy"],target:"_blank",className:"text-primary hover:underline",children:"View Policy"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Terms of Service"}),(0,n.jsx)(N(),{href:q.legal.terms,target:"_blank",className:"text-primary hover:underline",children:"View Terms"})]}),q.legal.other&&(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Additional Documentation"}),(0,n.jsx)(N(),{href:q.legal.other,target:"_blank",className:"text-primary hover:underline",children:"View Documentation"})]})]})]}),q.metadataCorrect&&q.exampleOutput&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-lg font-medium mb-2",children:"Example Output"}),(0,n.jsx)("div",{className:"bg-muted p-4 rounded-lg",children:(0,n.jsx)("p",{className:"font-mono text-sm break-all",children:q.exampleOutput})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsxs)(l.Zp,{className:"p-4",children:[(0,n.jsx)(p.A,{className:"w-4 h-4 text-muted-foreground mb-2"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Requests per Hour"}),(0,n.jsx)("p",{className:"text-2xl font-semibold",children:null===(e=q.totalRequests)||void 0===e?void 0:e.toLocaleString()})]}),(0,n.jsxs)(l.Zp,{className:"p-4",children:[(0,n.jsx)(g.A,{className:"w-4 h-4 text-muted-foreground mb-2"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Success Rate"}),(0,n.jsxs)("p",{className:"text-2xl font-semibold",children:[null===(t=q.successRate)||void 0===t?void 0:t.toFixed(1),"%"]})]}),(0,n.jsxs)(l.Zp,{className:"p-4",children:[(0,n.jsx)(v.A,{className:"w-4 h-4 text-muted-foreground mb-2"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Last Active"}),(0,n.jsx)("p",{className:"text-sm font-medium",children:q.lastActive})]})]})]}),(0,n.jsx)(m.av,{value:"activity",children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Agent Transactions"}),(0,n.jsx)("div",{className:"space-y-4",children:B.length>0?B.map(e=>(0,n.jsx)(Q,{tx:e,isBuyer:!1,isSeller:!0,isAdmin:!1},e.txHash)):(0,n.jsx)("p",{className:"text-center text-muted-foreground py-4",children:"No transactions found for this agent"})})]}),y&&K.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Your Interactions"}),(0,n.jsx)("div",{className:"space-y-4",children:K.map(e=>(0,n.jsx)(Q,{tx:e,isBuyer:!0,isSeller:!1,isAdmin:!1},e.txHash))})]})]})})]})})}),(0,n.jsxs)("div",{className:"col-span-12 lg:col-span-4 space-y-6",children:[(0,n.jsxs)(l.Zp,{className:"p-6",children:[(0,n.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Details"}),(0,n.jsxs)("dl",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("dt",{className:"text-sm text-muted-foreground",children:"Author"}),(0,n.jsx)("dd",{className:"text-sm font-medium",children:q.author})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("dt",{className:"text-sm text-muted-foreground",children:"Registered"}),(0,n.jsx)("dd",{className:"text-sm font-medium",children:q.registeredAt})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("dt",{className:"text-sm text-muted-foreground",children:"Policy ID"}),(0,n.jsx)("dd",{className:"text-sm font-mono break-all",children:q.policyId})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("dt",{className:"text-sm text-muted-foreground",children:"Asset ID"}),(0,n.jsx)("dd",{className:"text-sm font-mono break-all",children:q.asset})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("dt",{className:"text-sm text-muted-foreground",children:"Status"}),(0,n.jsx)("dd",{className:"text-sm font-medium",children:(0,n.jsx)(o.E,{variant:"active"===q.status?"default":"secondary",className:"retired"===q.status?"opacity-50":"",children:"active"===q.status?"Active":"Retired"})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("dt",{className:"text-sm text-muted-foreground",children:"Payment Address"}),(0,n.jsx)("dd",{className:"text-sm font-mono break-all",children:q.paymentAddress})]})]})]}),(0,n.jsxs)(l.Zp,{className:"p-6",children:[(0,n.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Verification"}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-sm",children:"Identity Verified"}),q.identityVerified?(0,n.jsx)(j.A,{className:"h-4 w-4 text-green-500"}):(0,n.jsx)(b.A,{className:"h-4 w-4 text-red-500"})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-sm",children:"Metadata Correct"}),q.metadataCorrect?(0,n.jsx)(j.A,{className:"h-4 w-4 text-green-500"}):(0,n.jsx)(b.A,{className:"h-4 w-4 text-red-500"})]})]})]}),(0,n.jsxs)(l.Zp,{className:"p-6",children:[(0,n.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Debug Information"}),(0,n.jsx)("div",{className:"space-y-2 text-xs font-mono max-h-[400px] overflow-y-auto",children:V.map((e,t)=>(0,n.jsx)("div",{className:"text-muted-foreground",children:e},t))})]})]})]}),L&&(0,n.jsxs)("div",{className:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-yellow-800 mb-2",children:"Agent Deregistration in Progress"}),(0,n.jsxs)("p",{className:"text-sm text-yellow-700",children:["This agent is being deregistered. This process may take a few minutes to complete.",z&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),"Transaction: ",(0,n.jsx)(N(),{href:"https://preprod.cardanoscan.io/transaction/".concat(z),target:"_blank",className:"underline",children:"View on Cardanoscan"})]})]})]})]}):(0,n.jsx)("div",{className:"p-6 text-center",children:(0,n.jsx)("p",{className:"text-red-500",children:"Agent not found"})})}[A,k]=E.then?(await E)():E,s()}catch(e){s(e)}})},86715:(e,t,a)=>{e.exports=a(74009)}},e=>{var t=t=>e(e.s=t);e.O(0,[287,436,636,593,792],()=>t(55833)),_N_E=e.O()}]);